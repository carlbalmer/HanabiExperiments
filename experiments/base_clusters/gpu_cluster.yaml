cluster_name: basic-gpu

max_workers: 1
min_workers: 0

provider:
    type: gcp
    region: us-central1
    availability_zone: us-central1-a
    project_id: hanabi-ma-thesis

auth:
    ssh_user: ubuntu

head_node:
    machineType: n1-standard-16
    disks:
      - boot: true
        autoDelete: true
        type: PERSISTENT
        initializeParams:
          diskSizeGb: 50
          sourceImage: projects/hanabi-ma-thesis/global/images/ray-08-tf1-15-gpu-node
    guestAccelerators:
      - acceleratorType: projects/hanabi-ma-thesis/zones/us-central1-a/acceleratorTypes/nvidia-tesla-p4
        acceleratorCount: 1
    metadata:
      items:
        - key: install-nvidia-driver
          value: "True"
    scheduling:
      - onHostMaintenance: TERMINATE

worker_nodes:
    machineType: n1-standard-16
    disks:
      - boot: true
        autoDelete: true
        type: PERSISTENT
        initializeParams:
          diskSizeGb: 50
          sourceImage: projects/hanabi-ma-thesis/global/images/ray-08-tf1-15-cpu-node
    scheduling:
      - preemptible: true
      - onHostMaintenance: TERMINATE

file_mounts: {
    "~/": ".",
}

head_setup_commands: []

setup_commands: []

head_start_ray_commands:
    - ray stop
    - >-
      ulimit -n 65536;
      ray start
      --head
      --redis-port=6379
      --object-manager-port=8076
      --autoscaling-config=~/ray_bootstrap_config.yaml
      --include-webui